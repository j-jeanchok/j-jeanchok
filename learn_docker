docke exec -dit 进入docker容器

run进去容器，exit退出，容器停止

run进去容器，ctrl+p+q 退出，容器不停止


重启容器
docker restart 容器ID或者容器名

停止容器
docker stop 容器ID或者容器名

强制停止容器
docker kill 容器ID或容器名

删除已经停止的容器
docker rm 容器ID或容器名

一次删除多个容器
docker rm -f $(docker ps -a -q)
docker ps -a -q | xargs docker rm

查看容器运行日志
docker logs 容器id

查看容器运行的进程
docker top 容器id 

查看内部细节
docker inspect 容器id




# 使用root使用vscode命令
code . --no-sandbox --user-data-dir=~/.vscode-root


Dockerfile:
dockerfile：
# 使用 Ubuntu 20.04 基础镜像
FROM ubuntu:20.04

# 安装 SSH 和必要工具
RUN apt-get update && \
    apt-get install -y openssh-server sudo && \
    rm -rf /var/lib/apt/lists/*

# 创建 SSH 目录并设置 root 密码（这里设为 "password"，生产环境请修改）
RUN mkdir /var/run/sshd && \
    echo 'root:password' | chpasswd

# 允许 root 通过 SSH 登录（仅用于测试，生产环境应创建普通用户）
RUN sed -i 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config

# 开放 SSH 端口
EXPOSE 22

# 下载完整版ubuntu20
Run apt update && \
    apt install -y ubuntu-desktop

# 1. 导入 Microsoft GPG 密钥
RUN wget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > packages.microsoft.gpg && \
    install -D -o root -g root -m 644 packages.microsoft.gpg /etc/apt/keyrings/packages.microsoft.gpg && \
    rm packages.microsoft.gpg

# 2. 添加 VS Code 仓库
RUN echo "deb [arch=amd64,arm64 signed-by=/etc/apt/keyrings/packages.microsoft.gpg] https://packages.microsoft.com/repos/code stable main" > /etc/apt/sources.list.d/vscode.list

# 3. 更新并安装 VS Code
RUN apt-get update && \
    apt-get install -y code && \
    # 创建别名解决 root 用户问题
    echo "alias code='code --no-sandbox --user-data-dir=/root/.vscode-root'" >> /root/.bashrc

# 启动 SSH 服务
CMD ["/usr/sbin/sshd", "-D"]
